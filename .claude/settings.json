{
  "_readme": "DO NOT EDIT THIS FILE. Your changes will be overwritten on update. Put customizations in settings.local.json instead.",
  "automatasaurus": {
    "limits": {
      "maxIssuesPerRun": 20,
      "maxEscalationsBeforeStop": 3,
      "maxRetriesPerIssue": 5,
      "maxConsecutiveFailures": 3,
      "teamMaxTeammates": 4,
      "teamPreferForReviews": true,
      "teamPreferForImplementation": false
    }
  },
  "permissions": {
    "allow": [
      "Bash",
      "Read",
      "Edit(./**)",
      "Write(./**)",
      "WebSearch",
      "mcp__playwright__*"
    ],
    "deny": [
      "Read(./.env)",
      "Read(./.env.*)",
      "Read(./secrets/**)",
      "Edit(../)",
      "Edit(~/**)",
      "Edit(//etc/**)",
      "Edit(//var/**)",
      "Edit(//bin/**)",
      "Edit(//sbin/**)",
      "Edit(//usr/**)",
      "Edit(//System/**)",
      "Write(../)",
      "Write(~/**)",
      "Write(//etc/**)",
      "Write(//var/**)",
      "Write(//bin/**)",
      "Write(//sbin/**)",
      "Write(//usr/**)",
      "Write(//System/**)",
      "Bash(rm -rf ~*)",
      "Bash(rm -rf /*)",
      "Bash(rm -rf ../*)",
      "Bash(rm -r ~*)",
      "Bash(rm -r /*)",
      "Bash(rm -r ../*)",
      "Bash(chmod -R 777 /*)",
      "Bash(chown -R * /*)"
    ]
  },
  "sandbox": {
    "enabled": true,
    "mode": "auto-allow",
    "filesystem": {
      "writeDeny": [
        "~/.ssh",
        "~/.gnupg",
        "~/.bashrc",
        "~/.zshrc",
        "~/.profile",
        "~/.bash_profile",
        "~/.config/claude",
        "/etc",
        "/bin",
        "/sbin",
        "/usr/bin",
        "/usr/sbin",
        "/System"
      ]
    },
    "network": {
      "allowedDomains": [
        "github.com",
        "api.github.com",
        "raw.githubusercontent.com",
        "ghcr.io",
        "npmjs.org",
        "registry.npmjs.org",
        "pypi.org",
        "files.pythonhosted.org",
        "docker.io",
        "registry-1.docker.io",
        "auth.docker.io",
        "index.docker.io",
        "production.cloudflare.docker.com",
        "gcr.io",
        "quay.io"
      ]
    }
  },
  "hooks": {
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Evaluate whether Claude should stop working. Context: $ARGUMENTS\n\nAs the workflow coordinator, check the following:\n\n## Workflow Loop Check\n1. Are there open GitHub issues that still need work? (Check with: gh issue list --state open)\n2. Are there PRs awaiting review or action? (Check with: gh pr list --state open)\n3. Is the current issue/PR fully completed and merged?\n\n## Task Completion Check\n4. Has the assigned task been fully completed?\n5. Are there any errors or failing tests?\n6. Has all work been properly tracked in GitHub?\n\n## Handoff Check\n7. Have all required reviewers approved (if PR is open)?\n8. Is the Tester ready to do final verification?\n9. Should the loop continue to the next issue?\n\n## Escalation Check\n10. Is Claude stuck and needs human intervention?\n11. Should a notification be sent to the user?\n\nRespond with JSON:\n- decision: 'approve' (allow stop - all work complete or needs human input) or 'block' (continue working - more issues to process)\n- reason: explanation for your decision\n- systemMessage: context for next action (e.g., 'Continue to issue #X' or 'Awaiting human input on #Y')\n- suppressOutput: true (always include this to hide hook output from chat)",
            "timeout": 60
          },
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR/.claude/hooks/on-stop.sh\""
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Evaluate if this subagent has completed its assigned task and is ready for handoff. Input: $ARGUMENTS\n\n## Role-Specific Completion Criteria\n\n### Product Owner\n- Issues created with proper format (User Story, Acceptance Criteria, Dependencies)\n- Dependencies documented with 'Depends on #X'\n- Labels applied (ready/blocked, priority)\n\n### Product Manager\n- Correct issue selected based on dependencies and priority\n- Proper routing to next agent in workflow\n- GitHub state updated (labels, comments)\n\n### Developer\n- Code implemented and tests passing\n- PR created with 'Closes #X' format\n- If stuck after 5 attempts, escalated to Architect\n\n### Architect\n- Code review completed (approve or request changes)\n- If reviewing stuck issue, provided analysis and recommendations\n- If also stuck, escalated to human\n\n### UI/UX\n- If UI-relevant: provided specs or review\n- If not relevant: commented 'N/A - No UI changes'\n\n### Researcher\n- Research question answered with structured findings\n- Report written with sources and confidence levels\n- Open questions documented\n\n### Tester\n- Automated tests run\n- Manual verification done (if needed)\n- If approved: PR merged\n- If issues: sent back to Developer\n\nRespond with JSON:\n- decision: 'approve' (ready for handoff) or 'block' (more work needed)\n- reason: what was/wasn't completed\n- nextAgent: which agent should take over (if applicable)\n- suppressOutput: true (always include this to hide hook output from chat)",
            "timeout": 30
          },
          {
            "type": "command",
            "command": "echo '[Subagent handoff - no notification]' >> \"${AUTOMATASAURUS_LOG:-/tmp/automatasaurus.log}\""
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "echo 'Automatasaurus workflow initialized. GitHub integration ready.'"
          }
        ]
      }
    ],
    "TeammateIdle": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "A teammate agent is idle. Evaluate whether it should claim more work or stop.\n\nContext: $ARGUMENTS\n\n## Check Shared Task List\n1. Are there unclaimed tasks in the shared task list?\n2. Are any tasks blocked that this teammate could help unblock?\n3. Has the team's overall goal been achieved?\n\n## Evaluate Teammate Role\n4. Is there remaining work matching this teammate's specialty?\n5. Would picking up more work help or slow down the team?\n6. Are other teammates waiting on this teammate's input?\n\n## Decision Criteria\n- If unclaimed tasks exist matching this role → claim next task\n- If team goal is achieved → teammate can stop\n- If blocked waiting on others → check if can help unblock\n- If no useful work remains → teammate should stop\n\nRespond with JSON:\n- decision: 'approve' (allow idle/stop) or 'block' (claim more work)\n- reason: explanation\n- systemMessage: what to do next (e.g., 'Claim task X' or 'Team work complete')\n- suppressOutput: true",
            "timeout": 30
          }
        ]
      }
    ],
    "TaskCompleted": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "A task has been marked completed. Evaluate the completion quality and check for unblocked dependencies.\n\nContext: $ARGUMENTS\n\n## Quality Check\n1. Does the completed task meet its acceptance criteria?\n2. Was the work documented (report written, PR updated, etc.)?\n3. Are there any loose ends or TODO items?\n\n## Dependency Check\n4. Does completing this task unblock other tasks in the shared list?\n5. Should blocked teammates be notified?\n6. Are there follow-up tasks that should be created?\n\n## Team Coordination\n7. Should the lead be notified of completion?\n8. Does this change the team's priority order?\n\nRespond with JSON:\n- decision: 'approve' (completion accepted) or 'block' (more work needed on this task)\n- reason: explanation\n- systemMessage: context for next action\n- suppressOutput: true",
            "timeout": 30
          }
        ]
      }
    ],
    "Notification": [
      {
        "matcher": "permission_prompt",
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR/.claude/hooks/notify.sh\" 'Claude Code' 'Permission required' approval"
          }
        ]
      }
    ]
  },
  "env": {
    "WORKFLOW_MODE": "automated",
    "GITHUB_WORKFLOW": "enabled",
    "AUTOMATASAURUS_SOUND": "true",
    "AUTOMATASAURUS_LOG": "/tmp/automatasaurus.log",
    "MAX_RETRY_ATTEMPTS": "5",
    "CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS": "1"
  }
}
